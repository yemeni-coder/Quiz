<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <title>Science Quiz</title>
    <style>
        body {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            font-family: 'Poppins', sans-serif;
        }

        .quiz-container {
            background-color: rgb(255, 255, 255);
            color: #333;
            padding: 30px;
            margin: auto;
            margin-top: 50px;
            box-shadow: 0px 0px 10px rgb(0, 0, 0);
            max-width: 600px;
            border-radius: 10px;
        }

        .question {
            margin-bottom: 20px;
        }

        .btn-submit {
            margin-top: 20px;
        }

        .alert {
            display: none;
        }

        #timer {
            font-weight: bold;
            margin-bottom: 20px;
        }

        textarea {
            resize: none;
        }

        .btn-dark:hover {
            background-color: #555;
            border-color: #555;
        }
    </style>
</head>

<body>

<div class="container quiz-container">
    <h2 class="text-center">Science Quiz Questions</h2>
    <div id="timer" class="text-center">Time Remaining: 2:00</div> <!-- Timer Display -->
    <form id="quizForm">

        <!-- Quiz Questions -->
        <!-- Quiz Questions -->
        <div class="question mb-3">
            <label>Question 1: Which series became Netflix's biggest ever show in September 2021?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="Stranger Things" required>
                <label class="form-check-label">Stranger Things</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="Squid Game">
                <label class="form-check-label">Squid Game</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question1" value="The Jeffrey Dahmer Story">
                <label class="form-check-label">The Jeffrey Dahmer Story</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 2: How many episodes of Game of Thrones are there?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="73" required>
                <label class="form-check-label">73</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="74">
                <label class="form-check-label">74</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question2" value="75">
                <label class="form-check-label">75</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 3: What is Usain Bolt's blistering 100m world record time?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="9.57 seconds" required>
                <label class="form-check-label">9.57 seconds</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="9.58 seconds">
                <label class="form-check-label">9.58 seconds</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question3" value="9.59 seconds">
                <label class="form-check-label">9.59 seconds</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 4: What is the sample mean of this data: 500,520,555,560,570,580?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="545.5" required>
                <label class="form-check-label">545.5</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="546.5">
                <label class="form-check-label">546.5</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question4" value="547.5">
                <label class="form-check-label">547.5</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 5: How many distinct permutations can be made from the letters of the word COLUMNS?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="7!" required>
                <label class="form-check-label">7!</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="Zero">
                <label class="form-check-label">Zero</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question5" value="1!">
                <label class="form-check-label">1!</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 6: How many of these permutations start with the letter M in this word COLUMNS?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="2!" required>
                <label class="form-check-label">2!</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="6!">
                <label class="form-check-label">6!</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question6" value="7!">
                <label class="form-check-label">7!</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 7: Which country has won the most Copa América titles?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Brazil" required>
                <label class="form-check-label">Brazil</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Argentina">
                <label class="form-check-label">Argentina</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question7" value="Uruguay">
                <label class="form-check-label">Uruguay</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 8: Which country was the first to win the World Cup outside its own continent?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="Brazil" required>
                <label class="form-check-label">Brazil</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="Germany">
                <label class="form-check-label">Germany</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question8" value="Argentina">
                <label class="form-check-label">Argentina</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 9: Which nation scored the fastest goal in a FIFA World Cup match?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="Germany" required>
                <label class="form-check-label">Germany</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="South Korea">
                <label class="form-check-label">South Korea</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question9" value="Turkey">
                <label class="form-check-label">Turkey</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <div class="question mb-3">
            <label>Question 10: Which player scored the most goals in a single calendar year, breaking a record previously held by Pelé?</label><br>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Cristiano Ronaldo" required>
                <label class="form-check-label">Cristiano Ronaldo</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Lionel Messi">
                <label class="form-check-label">Lionel Messi</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="question10" value="Short">
                <label class="form-check-label">Filippo Inzaghi</label>
            </div>
            <div class="alert alert-danger" role="alert">Please answer this question.</div>
        </div>

        <!-- More Questions... -->

        <!-- User Information Form  -->

        <div class="mb-3">
            <label for="userName" class="form-label">Name:</label>
            <input type="text" class="form-control" id="userName" name="Name" required>
        </div>
        <div class="mb-3">
            <label for="userEmail" class="form-label">Email:</label>
            <input type="email" class="form-control" id="userEmail" name="Email" required>
        </div>
        <div class="mb-3">
            <label for="quizScore" class="form-label">Quiz score will be shown as soon as you click submit:</label>
            <textarea class="form-control" id="quizScore" name="Message" rows="2" readonly></textarea>
        </div>

        <button type="submit" class="btn btn-dark btn-submit">Submit Quiz</button>
    </form>
    <span id="msg"></span>
</div>

<script>

    // Timer Functionality
    const totalTime = 2 * 60; // 2 minutes in seconds

    let timeLeft = totalTime;

    function updateTimer() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent = `Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        timeLeft--;

        if (timeLeft < 0) {
            clearInterval(timerInterval);
            alert("Time's up!");
            submitQuiz();
        }
    }

    const timerInterval = setInterval(updateTimer, 1000);


    // Form Validation and Submission
    document.getElementById("quizForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent the default form submission

        let valid = true;
        const questions = document.querySelectorAll(".question");

        // Validate if each question is answered
        questions.forEach((question) => {
            const alert = question.querySelector(".alert");
            const options = question.querySelectorAll("input[type='radio']");
            let answered = false;
            options.forEach(option => {
                if (option.checked) {
                    answered = true;
                }
            });
            if (!answered) {
                valid = false;
                alert.style.display = "block";
            } else {
                alert.style.display = "none";
            }
        });

        if (valid) {
            submitQuiz();
        } else {
            alert("Please answer all questions before submitting.");
        }
    });

    function submitQuiz() {
        // Calculate score
        let score = 0;
        const correctAnswers = {
            question1: "Squid Game",
            question2: "73",
            question3: "9.58 seconds",
            question4: "547.5",
            question5: "7!",
            question6: "6!",
            question7: "Uruguay",
            question8: "Brazil",
            question9: "Turkey",
            question10: "Lionel Messi"
        };

        // Check answers and calculate score
        for (let i = 1; i <= 10; i++) {
            const questionName = `question${i}`;
            if (document.querySelector(`input[name="${questionName}"]:checked`) &&
                document.querySelector(`input[name="${questionName}"]:checked`).value === correctAnswers[questionName]) {
                score++;
            }
        }

        // Get current date and time
        const currentDate = new Date();
        const submissionTime = currentDate.toLocaleString(); // Format: 'MM/DD/YYYY, HH:MM:SS AM/PM'

        // Store the score and time in localStorage (optional)
        localStorage.setItem("quizScore", score);
        localStorage.setItem("submissionTime", submissionTime);

        // Display score and time in the readonly textarea
        document.getElementById('quizScore').value = `Your quiz score is: ${score}/10. Submitted at: ${submissionTime}`;

        // Submit the form data to Google Sheets
        const form = document.forms['quizForm'];
        const scriptURL = 'https://script.google.com/macros/s/AKfycbzBY_7mmi3pqJ2Kc2SLBv2g3O6yoDGYy7ThLUpNGjNyVN6YQR1BzgnrKF6eRdZZxwm6eA/exec';
        const msg = document.getElementById("msg");

        // Add submission time to the form data
        const formData = new FormData(form);
        formData.append('SubmissionTime', submissionTime);

        fetch(scriptURL, { method: 'POST', body: formData })
            .then(response => {
                msg.innerHTML = "Quiz submitted successfully!";
                setTimeout(function () {
                    msg.innerHTML = "";
                    form.reset();
                    clearInterval(timerInterval); // Stop the timer after submission
                    // Redirect to the goodbye page (result.html)
                    window.location.href = "result.html";
                }, 3000);
            })
            .catch(error => console.error('Error!', error.message));
    }
    
</script>

</body>
</html>
